version: 2.1
jobs: 
  build: 
    docker: 
      - image: circleci/node:8.9
    steps:
      - checkout
      - run: echo "npm installing" 
      - run: npm install
      - run: CI=true npm run build
  test: 
    docker:
      - image: circleci/node:8.9
    steps:
      - checkout
      - run: echo "testing" 
      - run: npm install
      - run: npm run cypress:open
orbs:
  cypress: cypress-io/cypress@1.0.0
workflows:
  build:
    jobs:
      - cypress/run:
           build: "npm run build"
           record: true